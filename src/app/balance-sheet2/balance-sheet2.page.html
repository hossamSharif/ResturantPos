<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>ميزان المراجع والأرصدة</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="device == 'desktop'">
   <ion-grid *ngIf="user_info && store_info">
    <ion-row dir="rtl">
      <ion-col size="12">
        <ion-card class="ion-no-padding ion-no-margin">
          <ion-segment scrollable="true" mode="ios"  [(ngModel)]="segmVal"  (ionChange)="segmChange($event)" >
            <ion-segment-button value="all">
              <h4> <ion-text color="dark">كل الحسابات</ion-text>  </h4>
            </ion-segment-button>
            <ion-segment-button value="customer">
              <h4> <ion-text color="dark"> العملاء</ion-text> </h4>
            </ion-segment-button>
            <ion-segment-button value="supplier">
              <h4> <ion-text color="dark"> الموردون</ion-text></h4>
            </ion-segment-button> 
            <ion-segment-button value="spends">
              <h4> <ion-text color="dark"> المنصرفات</ion-text></h4>
            </ion-segment-button> 
          </ion-segment>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>  
  


  <ion-grid *ngIf="payArrayCust && payArraySupp"> 
    <ion-row dir="rtl">
      <ion-col size="2" class="ion-padding-start">
          <ion-item lines="none" class="ch">
            <ion-label>رصيد >  0 </ion-label>
            <ion-checkbox class="ion-no-margin ion-margin-end" slot="start"  [(ngModel)]="BlFilter" (ionChange)="applyFilter()"></ion-checkbox>
          </ion-item>
      </ion-col>
    </ion-row>
  </ion-grid> 


  <div *ngIf = " segmVal == 'all' ">
    <ion-grid class="ion-margin-top" *ngIf="user_info && store_info">
      <ion-row dir="rtl">
        <ion-col size="12" class="ion-no-padding">
          <ion-grid> 
            <ion-row>
              <ion-col size="12">
              <ion-card>
                 <table class="table">
                   <tr>
                    <th>التسلسل</th>
                    <th>اسم الحساب</th>
                    <th>عليــه (مدين)</th>
                    <th> (دائن)  لــه</th> 
                   </tr>
                   <tr *ngFor="let pay of payArray ; let i = index">
                    <td>{{i+1}}</td>
                    <td> {{pay.sub_name}}</td>
                    <td>{{pay.debit.toFixed(2)}}</td>
                    <td>{{pay.credit.toFixed(2)}}</td> 
                   </tr>
  
              
                   
                   <tr  *ngIf="loading == true">
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                     
                   </tr>
                   <tr *ngIf="loading == true" >
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    
                   </tr>
                   <tr  *ngIf="loading == true">
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                   
                   </tr> 
                 </table>  
              </ion-card>
            </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col> 
      </ion-row>
    </ion-grid>
  </div>

  <div *ngIf = "segmVal == 'customer'">
    <ion-grid class="ion-margin-top" *ngIf="user_info && store_info">
      <ion-row dir="rtl">
        <ion-col size="12" class="ion-no-padding">
          <ion-grid> 
            <ion-row>
              <ion-col size="12">
              <ion-card>
                 <table class="table">
                   <tr>
                    <th>التسلسل</th>
                    <th>اسم الحساب</th>
                    <th>عليــه (مدين)</th>
                    <th> (دائن)  لــه</th> 
                   </tr>
                   <tr *ngFor="let pay of payArrayCust ; let i = index">
                    <td>{{i+1}}</td>
                    <td> {{pay.sub_name}}</td>
                    <td>{{pay.debit.toFixed(2)}}</td>
                    <td>{{pay.credit.toFixed(2)}}</td> 
                   </tr>
  
              
                   
                   <tr  *ngIf="loading == true">
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                     
                   </tr>
                   <tr *ngIf="loading == true" >
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    
                   </tr>
                   <tr  *ngIf="loading == true">
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                   
                   </tr> 
                 </table>  
              </ion-card>
            </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col> 
      </ion-row>
    </ion-grid>
  </div>
 
  <div *ngIf = "segmVal == 'supplier'">
    <ion-grid class="ion-margin-top" *ngIf="user_info && store_info">
      <ion-row dir="rtl">
        <ion-col size="12" class="ion-no-padding">
          <ion-grid> 
            <ion-row>
              <ion-col size="12">
              <ion-card>
                 <table class="table">
                   <tr>
                    <th>التسلسل</th>
                    <th>اسم الحساب</th>
                    <th>عليــه (مدين)</th>
                    <th> (دائن)  لــه</th> 
                   </tr>
                   <tr *ngFor="let pay of payArraySupp ; let i = index">
                    <td>{{i+1}}</td>
                    <td> {{pay.sub_name}}</td>
                    <td>{{pay.debit.toFixed(2)}}</td>
                    <td>{{pay.credit.toFixed(2)}}</td> 
                   </tr>
  
              
                   
                   <tr  *ngIf="loading == true">
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                     
                   </tr>
                   <tr *ngIf="loading == true" >
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    
                   </tr>
                   <tr  *ngIf="loading == true">
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                   
                   </tr> 
                 </table>  
              </ion-card>
            </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col> 
      </ion-row>
    </ion-grid>
  </div>

  <div *ngIf = "segmVal == 'spends'">
    <ion-grid class="ion-margin-top" *ngIf="user_info && store_info">
      <ion-row dir="rtl">
        <ion-col size="12" class="ion-no-padding">
          <ion-grid> 
            <ion-row>
              <ion-col size="12">
              <ion-card>
                 <table class="table">
                   <tr>
                    <th>التسلسل</th>
                    <th>اسم الحساب</th>
                    <th>عليــه (مدين)</th>
                    <th> (دائن)  لــه</th> 
                   </tr>
                   <tr *ngFor="let pay of payArraySpends ; let i = index">
                    <td>{{i+1}}</td>
                    <td> {{pay.sub_name}}</td>
                    <td>{{pay.debit.toFixed(2)}}</td>
                    <td>{{pay.credit.toFixed(2)}}</td> 
                   </tr>
  
              
                   
                   <tr  *ngIf="loading == true">
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                     
                   </tr>
                   <tr *ngIf="loading == true" >
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    
                   </tr>
                   <tr  *ngIf="loading == true">
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td>  <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                    <td><ion-skeleton-text animated style="width: 100%"></ion-skeleton-text></td>
                   
                   </tr> 
                 </table>  
              </ion-card>
            </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col> 
      </ion-row>
    </ion-grid>
  </div>
 
 
</ion-content>
<ion-content *ngIf="device == 'mobile'">
  <ion-grid *ngIf="user_info && store_info">
   <ion-row dir="rtl">
     <ion-col size="12">
       <ion-card class="ion-no-padding ion-no-margin">
         <ion-segment scrollable="true" mode="ios"  [(ngModel)]="segmVal"  (ionChange)="segmChange($event)" >
           <ion-segment-button value="all">
             <h4> <ion-text color="dark">كل الحسابات</ion-text>  </h4>
           </ion-segment-button>
           <ion-segment-button value="customer">
             <h4> <ion-text color="dark"> العملاء</ion-text> </h4>
           </ion-segment-button>
           <ion-segment-button value="supplier">
             <h4> <ion-text color="dark"> الموردون</ion-text></h4>
           </ion-segment-button> 
           <ion-segment-button value="spends">
             <h4> <ion-text color="dark"> المنصرفات</ion-text></h4>
           </ion-segment-button> 
         </ion-segment>
       </ion-card>
     </ion-col>
   </ion-row>
 </ion-grid>  
 


 <ion-grid *ngIf="payArrayCust && payArraySupp"> 
   <ion-row dir="rtl">
     <ion-col size="5" class="ion-padding-start">
         <ion-item lines="none" class="ch">
           <ion-label>رصيد >  0 </ion-label>
           <ion-checkbox class="ion-no-margin ion-margin-end" slot="start"  [(ngModel)]="BlFilter" (ionChange)="applyFilter()"></ion-checkbox>
         </ion-item>
     </ion-col>
   </ion-row>
 </ion-grid> 


 <div *ngIf = " segmVal == 'all' ">
  <ion-grid class="ion-margin-top" *ngIf="user_info && store_info">
    <ion-row dir="rtl">
      <ion-col size="12" class="ion-no-padding">
        <ion-accordion-group *ngIf="payArray">
          <ion-accordion *ngFor="let pay of payArray ; let i = index" [value]="i" toggleIcon="caret-down-circle"
            toggleIconSlot="end">
            <ion-item slot="header" color="light" > 
              <ion-icon name="newspaper-outline" color="primary" slot="start"></ion-icon>
              <ion-grid>
                <ion-row>
                  <ion-col size="12">
                    <ion-label> {{pay.sub_name}} </ion-label> 
                  </ion-col>
                  <ion-col size="12">
                    <ion-label> 
                     
                  
                      <ion-text *ngIf="+pay.credit > 0">  (دائن)  لــه    </ion-text> 
                      <ion-text *ngIf="+pay.credit > 0">  {{pay.credit.toFixed(2)}} </ion-text> 
                     
                      <ion-text *ngIf="+pay.debit > 0">  عليــه (مدين)   </ion-text> 
                      <ion-text *ngIf="+pay.debit > 0">  {{pay.debit.toFixed(2)}} </ion-text> 

                    </ion-label>
                  </ion-col>
                  
                </ion-row>
              </ion-grid> 
            </ion-item>


          </ion-accordion>
        </ion-accordion-group>
      </ion-col>
    </ion-row>
  </ion-grid>


  
 </div>

 <div *ngIf = "segmVal == 'customer'">
  <ion-grid class="ion-margin-top" *ngIf="user_info && store_info">
    <ion-row dir="rtl">
      <ion-col size="12" class="ion-no-padding">
        <ion-accordion-group *ngIf="payArrayCust">
          <ion-accordion *ngFor="let pay of payArrayCust ; let i = index" [value]="i" toggleIcon="caret-down-circle"
            toggleIconSlot="end">
            <ion-item slot="header" color="light" > 
              <ion-icon name="newspaper-outline" color="primary" slot="start"></ion-icon>
              <ion-grid>
                <ion-row>
                  <ion-col size="12">
                    <ion-label> {{pay.sub_name}} </ion-label> 
                  </ion-col>
                  <ion-col size="12">
                    <ion-label> 
                     
                  
                      <ion-text *ngIf="+pay.credit > 0">  (دائن)  لــه    </ion-text> 
                      <ion-text *ngIf="+pay.credit > 0">  {{pay.credit.toFixed(2)}} </ion-text> 
                     
                      <ion-text *ngIf="+pay.debit > 0">  عليــه (مدين)   </ion-text> 
                      <ion-text *ngIf="+pay.credit > 0">  {{pay.debit.toFixed(2)}} </ion-text> 

                    </ion-label>
                  </ion-col>
                  
                </ion-row>
              </ion-grid> 
            </ion-item>


          </ion-accordion>
        </ion-accordion-group>
      </ion-col>
    </ion-row>
  </ion-grid>
 </div>

 <div *ngIf = "segmVal == 'supplier'">

  <ion-grid class="ion-margin-top" *ngIf="user_info && store_info">
    <ion-row dir="rtl">
      <ion-col size="12" class="ion-no-padding">
        <ion-accordion-group *ngIf="payArraySupp">
          <ion-accordion *ngFor="let pay of payArraySupp ; let i = index" [value]="i" toggleIcon="caret-down-circle"
            toggleIconSlot="end">
            <ion-item slot="header" color="light" > 
              <ion-icon name="newspaper-outline" color="primary" slot="start"></ion-icon>
              <ion-grid>
                <ion-row>
                  <ion-col size="12">
                    <ion-label> {{pay.sub_name}} </ion-label> 
                  </ion-col>
                  <ion-col size="12">
                    <ion-label> 
                     
                  
                      <ion-text *ngIf="+pay.credit > 0">  (دائن)  لــه    </ion-text> 
                      <ion-text *ngIf="+pay.credit > 0">  {{pay.credit.toFixed(2)}} </ion-text> 
                     
                      <ion-text *ngIf="+pay.debit > 0">  عليــه (مدين)   </ion-text> 
                      <ion-text *ngIf="+pay.credit > 0">  {{pay.debit.toFixed(2)}} </ion-text> 

                    </ion-label>
                  </ion-col>
                  
                </ion-row>
              </ion-grid> 
            </ion-item>


          </ion-accordion>
        </ion-accordion-group>
      </ion-col>
    </ion-row>
  </ion-grid>
 </div>

 <div *ngIf = "segmVal == 'spends'">
  <ion-grid class="ion-margin-top" *ngIf="user_info && store_info">
    <ion-row dir="rtl">
      <ion-col size="12" class="ion-no-padding">
        <ion-accordion-group *ngIf="payArraySpends">
          <ion-accordion *ngFor="let pay of payArraySpends ; let i = index" [value]="i" toggleIcon="caret-down-circle"
            toggleIconSlot="end">
            <ion-item slot="header" color="light" > 
              <ion-icon name="newspaper-outline" color="primary" slot="start"></ion-icon>
              <ion-grid>
                <ion-row>
                  <ion-col size="12">
                    <ion-label> {{pay.sub_name}} </ion-label> 
                  </ion-col>
                  <ion-col size="12">
                    <ion-label> 
                     
                  
                      <ion-text *ngIf="+pay.credit > 0">  (دائن)  لــه    </ion-text> 
                      <ion-text *ngIf="+pay.credit > 0">  {{pay.credit.toFixed(2)}} </ion-text> 
                     
                      <ion-text *ngIf="+pay.debit > 0">  عليــه (مدين)   </ion-text> 
                      <ion-text *ngIf="+pay.credit > 0">  {{pay.debit.toFixed(2)}} </ion-text> 

                    </ion-label>
                  </ion-col>
                  
                </ion-row>
              </ion-grid> 
            </ion-item>


          </ion-accordion>
        </ion-accordion-group>
      </ion-col>
    </ion-row>
  </ion-grid>
 </div>


</ion-content>


  <ion-footer>
 <ion-grid dir="rtl"  >
    <!-- <ion-row class="ion-justify-content-center" *ngIf="payArray && segmVal == 'all'">
      <ion-col>
        <ion-label><ion-text>  الدائنون : </ion-text>  <strong>{{creditors}}</strong></ion-label>
      </ion-col>  
      <ion-col>
        <ion-label><ion-text>  المدينون : </ion-text>  <strong>{{debitors}}</strong></ion-label>
      </ion-col> 
    </ion-row> -->

    <ion-row  *ngIf="payArray && segmVal!='all'">
      <ion-col size="6">
        <h4>
          <ion-text>  الرصيد الحالي  : </ion-text> 
          <ion-text> <strong>{{balanceSatus}}</strong></ion-text>
          <ion-text>  <strong>{{balance.toFixed(2)}}</strong></ion-text> 
          </h4>
      </ion-col>  
    </ion-row>
  </ion-grid>  
</ion-footer>  
